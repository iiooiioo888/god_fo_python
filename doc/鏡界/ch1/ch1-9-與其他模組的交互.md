# ç¬¬1ç« ï¼šè³‡æ–™æºè¨»å†Šä¸­å¿ƒ (Data Source Registry)

## 1.9 èˆ‡å…¶ä»–æ¨¡çµ„çš„äº¤äº’

**[â† è¿”å›ç¬¬1ç« é¦–é ](ch1-index.md)**

---

## 1.9.1 èˆ‡è³‡æ–™æºå¥åº·ç›‘æµ‹ç³»çµ±äº¤äº’

```mermaid
sequenceDiagram
    participant DSR as Data Source Registry
    participant DSHMS as Data Source Health Monitoring System
    participant EventBus as Event Bus
    
    DSHMS->>DSR: GET /api/v1/data-sources?status=active (æ¯5åˆ†é’Ÿ)
    DSR-->>DSHMS: Active data sources list
    
    loop æ¯5åˆ†é’Ÿ
        DSHMS->>DSR: GET /api/v1/data-sources?status=active
        DSR-->>DSHMS: Active data sources list
    end
    
    loop æ¯å€‹è³‡æ–™æº
        DSHMS->>DSHMS: æ‰§è¡Œå¥åº·æ£€æŸ¥
        DSHMS->>EventBus: PUBLISH health.check.completed
        EventBus->>DSR: SUBSCRIBE health.check.completed
        DSR->>DSR: æ›´æ–°è³‡æ–™æºå¥åº·ç‹€æ…‹
    end
    
    DSR->>DSHMS: SUBSCRIBE data_source.created
    DSR->>DSHMS: SUBSCRIBE data_source.updated
    DSR->>DSHMS: SUBSCRIBE data_source.deleted
```

*å›¾1.11: èˆ‡è³‡æ–™æºå¥åº·ç›‘æµ‹ç³»çµ±äº¤äº’åºåˆ—å›¾*

### äº¤äº’åè®®é—œéµåƒæ•¸

| åƒæ•¸ | é¡å‹ | å¿…å¡« | èªªæ˜ | ç¤ºä¾‹ |
|------|------|------|------|------|
| `status` | string | å¦ | è³‡æ–™æºç‹€æ…‹éæ»¤ | "active" |
| `last_updated_after` | timestamp | å¦ | ä»…ç²å–æ›´æ–°æ™‚é–“ä¹‹å¾Œçš„è³‡æ–™ | "2023-06-15T10:00:00Z" |
| `limit` | integer | å¦ | è¿”å›ç»“æœæ•¸é‡é™åˆ¶ | 100 |
| `offset` | integer | å¦ | åˆ†é åç§»é‡ | 0 |
| `include_health` | boolean | å¦ | æ˜¯å¦åŒ…å«å¥åº·è³‡è¨Š | true |

*è¡¨1.24: å¥åº·ç›‘æµ‹ç³»çµ±äº¤äº’åè®®åƒæ•¸*

---

## 1.9.2 èˆ‡è³‡æ–™è™•ç†å·¥ä½œæµå¼•æ“äº¤äº’

```mermaid
sequenceDiagram
    participant DPWE as Data Processing Workflow Engine
    participant DSR as Data Source Registry
    participant EventBus as Event Bus
    
    DPWE->>DSR: GET /api/v1/data-sources/{id}
    DSR-->>DPWE: Data source details
    
    DPWE->>DSR: GET /api/v1/data-sources?category=images
    DSR-->>DPWE: Filtered data sources
    
    DPWE->>DSR: GET /api/v1/data-sources:search
    DSR-->>DPWE: Search results
    
    DSR->>EventBus: PUBLISH data_source.created
    DSR->>EventBus: PUBLISH data_source.updated
    EventBus->>DPWE: SUBSCRIBE data_source.created
    EventBus->>DPWE: SUBSCRIBE data_source.updated
    
    DPWE->>DSR: SUBSCRIBE workflow.completed
    DSR->>DPWE: PUBLISH workflow.completed
```

*å›¾1.12: èˆ‡è³‡æ–™è™•ç†å·¥ä½œæµå¼•æ“äº¤äº’åºåˆ—å›¾*

### å·¥ä½œæµå¼•æ“æŸ¥è©¢å„ªåŒ–å°æ¯”

| æŸ¥è©¢æ–¹å¼ | è¯·æ±‚é‡ | éŸ¿æ‡‰æ™‚é–“ | è³‡æ–™å‚³è¼¸é‡ | èªªæ˜ |
|----------|--------|----------|------------|------|
| **REST API (å…¨é‡)** | 1000/åˆ†é’Ÿ | 120ms | 5MB/åˆ†é’Ÿ | æ¯æ¬¡ç²å–å®Œæ•´è³‡æ–™ |
| **REST API (å­—æ®µé€‰æ‹©)** | 1000/åˆ†é’Ÿ | 80ms | 2MB/åˆ†é’Ÿ | ä»…ç²å–å¿…è¦å­—æ®µ |
| **GraphQL** | 1000/åˆ†é’Ÿ | 60ms | 1.5MB/åˆ†é’Ÿ | ç²¾ç¡®å­—æ®µé€‰æ‹© |
| **äº‹ä»¶é©…å‹•** | 50/åˆ†é’Ÿ | 10ms | 0.1MB/åˆ†é’Ÿ | ä»…ç²å–è®Šæ›´è³‡æ–™ |

*è¡¨1.25: å·¥ä½œæµå¼•æ“æŸ¥è©¢æ–¹å¼å°æ¯”*

---

## 1.9.3 èˆ‡AIè¼”åŠ©é–‹å‘ç³»çµ±äº¤äº’

```mermaid
sequenceDiagram
    participant AIDS as AI-Assisted Development System
    participant DSR as Data Source Registry
    participant EventBus as Event Bus
    
    AIDS->>DSR: GET /api/v1/data-sources?tags=api
    DSR-->>AIDS: API data sources
    
    AIDS->>DSR: GET /api/v1/data-sources/{id}
    DSR-->>AIDS: Data source schema
    
    AIDS->>DSR: POST /api/v1/data-sources/schema/analyze
    DSR-->>AIDS: Schema analysis results
    
    DSR->>EventBus: PUBLISH data_source.created
    DSR->>EventBus: PUBLISH data_source.updated
    EventBus->>AIDS: SUBSCRIBE data_source.created
    EventBus->>AIDS: SUBSCRIBE data_source.updated
    
    AIDS->>DSR: SUBSCRIBE ai.suggestion.generated
    DSR->>AIDS: PUBLISH ai.suggestion.generated
```

*å›¾1.13: èˆ‡AIè¼”åŠ©é–‹å‘ç³»çµ±äº¤äº’åºåˆ—å›¾*

### AIè¼”åŠ©é–‹å‘ç³»çµ±äº¤äº’åè®®

| ç«¯ç‚¹ | æ–¹æ³• | è¯·æ±‚ | éŸ¿æ‡‰ | èªªæ˜ |
|------|------|------|------|------|
| `/api/v1/data-sources/schema/analyze` | POST | `{"data_source_id": "ds-7a8b9c0d"}` | `{"fields": [{"name": "id", "type": "string", "confidence": 0.98}, ...]}` | åˆ†æè³‡æ–™æºschema |
| `/api/v1/data-sources/{id}/ai/suggestions` | GET | - | `{"suggestions": [{"type": "field_mapping", "source": "id", "target": "user_id", "confidence": 0.95}, ...]}` | ç²å–AIå»ºè­° |
| `/api/v1/data-sources/ai/feedback` | POST | `{"suggestion_id": "sug-123", "accepted": true}` | 204 No Content | æä¾›åé¦ˆ |

*è¡¨1.26: AIè¼”åŠ©é–‹å‘ç³»çµ±äº¤äº’åè®®*

---

## ğŸ“‘ ç›¸é—œç« ç¯€

| å‰åº | ç•¶å‰ | å¾ŒçºŒ |
|-----|------|------|
| [1.8 å®‰å…¨è€ƒæ…®](ch1-8-å®‰å…¨è€ƒæ…®.md) | **1.9 èˆ‡å…¶ä»–æ¨¡çµ„çš„äº¤äº’** | - |

**å¿«é€Ÿéˆæ¥ï¼š**
- [1.8 å®‰å…¨è€ƒæ…®](ch1-8-å®‰å…¨è€ƒæ…®.md)
- [â† è¿”å›ç¬¬1ç« é¦–é ](ch1-index.md)
- [â† è¿”å›åˆ°åŸå§‹ ch1.md](ch1.md)
