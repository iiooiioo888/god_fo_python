<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- Basic Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>镜界 - 数据源镜像平台</title>
    <meta name="description" content="让每一张图片、每一段视频，都有迹可循 - 专业的數據源鏡像管理平台">
    <meta name="keywords" content="数据源,镜像,爬虫,图片,视频,AI,自动化">
    <meta name="author" content="镜界平台">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🔍</text></svg>">

    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Libraries -->
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

    <!-- Component System -->
    <script src="components/template-processor.js"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-900 to-black text-white">
    <custom-navbar></custom-navbar>

    <div class="min-h-screen">
        <!-- Hero Section -->
        <section id="hero" class="relative min-h-screen flex items-center justify-center overflow-hidden">
            <div id="globe-background" class="absolute inset-0 z-0"></div>
            <div class="container mx-auto px-4 relative z-10 text-center">
                <h1 class="text-5xl md:text-7xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-purple-500">
                    镜界
                </h1>
                <p class="text-xl md:text-2xl mb-8 max-w-3xl mx-auto text-gray-300">
                    让每一张图片、每一段视频，都有迹可循
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <a href="#features" class="px-8 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition-all duration-300 transform hover:scale-105">
                        探索数据源
                    </a>
                    <a href="#mirror-hall" class="px-8 py-3 bg-transparent border-2 border-purple-500 hover:bg-purple-500 rounded-lg font-medium transition-all duration-300">
                        加入社区
                    </a>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section id="features" class="py-20 bg-gray-900/50">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl font-bold text-center mb-16">核心功能</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- Feature Cards using our component system -->
                    <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700 hover:border-blue-500 transition-all duration-300">
                        <div class="w-12 h-12 bg-blue-500 rounded-lg flex items-center justify-center mb-4">
                            <i data-feather="database" class="text-white"></i>
                        </div>
                        <h3 class="text-2xl font-semibold mb-3">镜库</h3>
                        <p class="text-gray-400">收藏各类图片、视频数据源，结构化提交模板，智能标签系统</p>
                    </div>

                    <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700 hover:border-green-500 transition-all duration-300">
                        <div class="w-12 h-12 bg-green-500 rounded-lg flex items-center justify-center mb-4">
                            <i data-feather="eye" class="text-white"></i>
                        </div>
                        <h3 class="text-2xl font-semibold mb-3">照妖镜</h3>
                        <p class="text-gray-400">深度分析目标网站技术结构和反爬机制</p>
                    </div>

                    <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700 hover:border-yellow-500 transition-all duration-300">
                        <div class="w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center mb-4">
                            <i data-feather="activity" class="text-white"></i>
                        </div>
                        <h3 class="text-2xl font-semibold mb-3">镜像状态监控</h3>
                        <p class="text-gray-400">实时监控数据源健康状态和可用性</p>
                    </div>

                    <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700 hover:border-purple-500 transition-all duration-300">
                        <div class="w-12 h-12 bg-purple-500 rounded-lg flex items-center justify-center mb-4">
                            <i data-feather="layers" class="text-white"></i>
                        </div>
                        <h3 class="text-2xl font-semibold mb-3">万花筒</h3>
                        <p class="text-gray-400">将相关数据源组合成有意义的主题集合</p>
                    </div>

                    <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700 hover:border-red-500 transition-all duration-300">
                        <div class="w-12 h-12 bg-red-500 rounded-lg flex items-center justify-center mb-4">
                            <i data-feather="message-square" class="text-white"></i>
                        </div>
                        <h3 class="text-2xl font-semibold mb-3">镜厅</h3>
                        <p class="text-gray-400">技术讨论和经验分享的社区空间</p>
                    </div>

                    <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700 hover:border-indigo-500 transition-all duration-300">
                        <div class="w-12 h-12 bg-indigo-500 rounded-lg flex items-center justify-center mb-4">
                            <i data-feather="tool" class="text-white"></i>
                        </div>
                        <h3 class="text-2xl font-semibold mb-3">镜像工坊</h3>
                        <p class="text-gray-400">提供各类辅助爬虫开发的实用工具</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Status Monitoring Preview -->
        <section class="py-12 bg-gray-800/50">
            <div class="container mx-auto px-4 text-center">
                <div class="max-w-4xl mx-auto">
                    <div class="flex items-center justify-center gap-4 mb-6">
                        <span class="text-5xl">📊</span>
                        <div>
                            <h2 class="text-3xl font-bold">镜像状态监控中心</h2>
                            <p class="text-lg text-gray-400 mt-2">实时监控数据源健康状态，可用性与性能指标</p>
                        </div>
                    </div>

                    <!-- Quick Stats -->
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-gray-700/50 rounded-xl p-4">
                            <div class="text-2xl font-bold text-green-400 mb-1">42+</div>
                            <div class="text-sm text-gray-400">监控数据源</div>
                        </div>
                        <div class="bg-gray-700/50 rounded-xl p-4">
                            <div class="text-2xl font-bold text-green-400 mb-1">98%</div>
                            <div class="text-sm text-gray-400">平均可用率</div>
                        </div>
                        <div class="bg-gray-700/50 rounded-xl p-4">
                            <div class="text-2xl font-bold text-blue-400 mb-1">24/7</div>
                            <div class="text-sm text-gray-400">连续监控</div>
                        </div>
                        <div class="bg-gray-700/50 rounded-xl p-4">
                            <div class="text-2xl font-bold text-purple-400 mb-1">实时</div>
                            <div class="text-sm text-gray-400">告警通知</div>
                        </div>
                    </div>

                    <a href="status.html" class="inline-block px-8 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition-all transform hover:scale-105">
                        进入监控中心
                    </a>
                </div>
            </div>
        </section>

        <!-- Mirror Hall Section -->
        <section id="mirror-hall" class="py-20">
            <div class="container mx-auto px-4">
                <h2 class="text-4xl font-bold text-center mb-16">镜厅社区</h2>
                <div class="max-w-4xl mx-auto bg-gray-800/50 backdrop-blur-sm rounded-xl p-8 border border-gray-700">
                    <div class="flex items-center mb-6">
                        <div class="w-12 h-12 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full flex items-center justify-center mr-4">
                            <i data-feather="users" class="text-white"></i>
                        </div>
                        <div>
                            <h3 class="text-2xl font-semibold">技术交流社区</h3>
                            <p class="text-gray-400">加入我们的技术社区，分享经验，解决问题</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                        <div class="bg-gray-700/50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">技术求助区</h4>
                            <p class="text-sm text-gray-400">遇到技术难题？在这里寻求帮助</p>
                        </div>
                        <div class="bg-gray-700/50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">代码分享区</h4>
                            <p class="text-sm text-gray-400">分享你的爬虫项目和工具</p>
                        </div>
                        <div class="bg-gray-700/50 p-4 rounded-lg">
                            <h4 class="font-semibold mb-2">经验交流区</h4>
                            <p class="text-sm text-gray-400">交流最佳实践和技术心得</p>
                        </div>
                    </div>
                    <a href="community.html" class="inline-block px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-700 rounded-lg font-medium hover:opacity-90 transition-opacity">
                        立即加入社区
                    </a>
                </div>
            </div>
        </section>

        <!-- Stats Section -->
        <section class="py-20 bg-gray-900/50">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
                    <div>
                        <div class="text-4xl font-bold text-blue-400 mb-2">1000+</div>
                        <div class="text-gray-400">数据源收录</div>
                    </div>
                    <div>
                        <div class="text-4xl font-bold text-green-400 mb-2">500+</div>
                        <div class="text-gray-400">活跃用户</div>
                    </div>
                    <div>
                        <div class="text-4xl font-bold text-purple-400 mb-2">50+</div>
                        <div class="text-gray-400">技术专家</div>
                    </div>
                    <div>
                        <div class="text-4xl font-bold text-yellow-400 mb-2">98%</div>
                        <div class="text-gray-400">数据源可用率</div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <custom-footer></custom-footer>

    <script src="components/navbar.js"></script>
    <script src="components/footer.js"></script>
    <script src="script.js"></script>
    <script>
        feather.replace();

        // Performance and Accessibility Optimizations
        class PageOptimizer {
            constructor() {
                this.init();
            }

            init() {
                this.setupLoadingStates();
                this.setupErrorHandling();
                this.setupLazyLoading();
                this.setupAccessibility();
                this.setupPerformanceMonitoring();
                this.initVantaGlobe();
            }

            setupLoadingStates() {
                // Create loading overlay
                const loadingOverlay = document.createElement('div');
                loadingOverlay.id = 'page-loading';
                loadingOverlay.className = 'fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center pointer-events-none opacity-0 transition-opacity duration-300';
                loadingOverlay.innerHTML = `
                    <div class="bg-gray-800 rounded-xl p-8 flex items-center gap-4 shadow-2xl">
                        <div class="animate-spin rounded-full h-8 w-8 border-2 border-blue-500 border-t-transparent"></div>
                        <div class="text-white font-medium">加载中...</div>
                    </div>
                `;
                document.body.appendChild(loadingOverlay);
            }

            setupErrorHandling() {
                // Global error handler
                window.addEventListener('error', (e) => {
                    console.error('JavaScript error:', e.error);
                    this.showErrorToast('页面出现错误，请刷新重试');
                });

                // Promise rejection handler
                window.addEventListener('unhandledrejection', (e) => {
                    console.error('Promise rejection:', e.reason);
                    this.showErrorToast('网络请求失败');
                });
            }

            setupLazyLoading() {
                // Intersection Observer for lazy loading
                const observerOptions = {
                    root: null,
                    rootMargin: '50px 0px',
                    threshold: 0.1
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const element = entry.target;

                            // Add fade-in animation
                            element.classList.add('animate-fade-in');

                            // Lazy load images if any
                            const img = element.querySelector('img[data-src]');
                            if (img) {
                                img.src = img.dataset.src;
                                img.removeAttribute('data-src');
                            }

                            observer.unobserve(element);
                        }
                    });
                }, observerOptions);

                // Observe feature cards
                document.querySelectorAll('#features .bg-gray-800\\/50').forEach(card => {
                    observer.observe(card);
                });
            }

            setupAccessibility() {
                // Skip to content link
                const skipLink = document.createElement('a');
                skipLink.href = '#main-content';
                skipLink.className = 'sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded z-50';
                skipLink.textContent = '跳到主要内容';
                document.body.insertBefore(skipLink, document.body.firstChild);

                // Add main content landmark
                const mainContent = document.querySelector('main');
                if (mainContent) {
                    mainContent.id = 'main-content';
                    mainContent.setAttribute('role', 'main');
                }

                // Improve heading hierarchy
                const headings = document.querySelectorAll('h1, h2, h3, h4, h5, h6');
                headings.forEach((heading, index) => {
                    if (!heading.id) {
                        heading.id = `heading-${index}`;
                    }
                });

                // Add ARIA labels
                const buttons = document.querySelectorAll('button:not([aria-label]):not([aria-labelledby])');
                buttons.forEach(button => {
                    const text = button.textContent.trim();
                    if (text) {
                        button.setAttribute('aria-label', text);
                    }
                });
            }

            setupPerformanceMonitoring() {
                // Performance observer
                if ('PerformanceObserver' in window) {
                    const observer = new PerformanceObserver((list) => {
                        const entries = list.getEntries();
                        entries.forEach((entry) => {
                            if (entry.duration > 100) {
                                console.warn('Long task detected:', entry);
                            }
                        });
                    });
                    observer.observe({ entryTypes: ['longtask'] });
                }
            }

            initVantaGlobe() {
                // Lazy load Vanta.js
                const loadVanta = () => {
                    if (window.VANTA) {
                        this.createVantaGlobe();
                    } else {
                        // Load Three.js first
                        if (!window.THREE) {
                            this.loadScript('https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js')
                                .then(() => this.loadScript('https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.globe.min.js'))
                                .then(() => this.createVantaGlobe())
                                .catch((error) => {
                                    console.warn('Failed to load Vanta.js:', error);
                                    this.createFallbackHero();
                                });
                        } else {
                            this.loadScript('https://cdn.jsdelivr.net/npm/vanta@latest/dist/vanta.globe.min.js')
                                .then(() => this.createVantaGlobe())
                                .catch((error) => {
                                    console.warn('Failed to load Vanta.js:', error);
                                    this.createFallbackHero();
                                });
                        }
                    }
                };

                loadVanta();
            }

            loadScript(src) {
                return new Promise((resolve, reject) => {
                    const script = document.createElement('script');
                    script.src = src;
                    script.onload = resolve;
                    script.onerror = reject;
                    document.head.appendChild(script);
                });
            }

            createVantaGlobe() {
                const globeElement = document.getElementById('globe-background');
                if (!globeElement) return;

                try {
                    window.vantaEffect = window.VANTA.GLOBE({
                        el: globeElement,
                        mouseControls: true,
                        touchControls: true,
                        gyroControls: false,
                        minHeight: 200.00,
                        minWidth: 200.00,
                        scale: 1.00,
                        scaleMobile: 1.00,
                        color: 0x3b82f6,
                        color2: 0x8b5cf6,
                        backgroundColor: 0x000000
                    });

                    // Setup cleanup on page unload
                    window.addEventListener('beforeunload', () => {
                        if (window.vantaEffect) {
                            window.vantaEffect.destroy();
                        }
                    });

                } catch (error) {
                    console.warn('Vanta.js initialization failed:', error);
                    this.createFallbackHero();
                }
            }

            createFallbackHero() {
                const hero = document.getElementById('hero');
                if (!hero) return;

                // Create animated gradient background
                hero.style.background = `
                    linear-gradient(45deg,
                        #1a1a2e 0%,
                        #16213e 50%,
                        #0f172a 100%
                    )
                `;
                hero.style.backgroundSize = '400% 400%';
                hero.style.animation = 'gradientShift 15s ease infinite';

                // Add fallback animation
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes gradientShift {
                        0% { background-position: 0% 50%; }
                        50% { background-position: 100% 50%; }
                        100% { background-position: 0% 50%; }
                    }
                `;
                document.head.appendChild(style);
            }

            showErrorToast(message) {
                // Use existing toast system if available, otherwise create simple alert
                if (window.showToast) {
                    window.showToast(message, 'error');
                } else {
                    alert(message);
                }
            }
        }

        // Initialize page optimizer
        document.addEventListener('DOMContentLoaded', () => {
            new PageOptimizer();
        });

        // Smooth scroll for hero buttons
        document.addEventListener('click', function(e) {
            const link = e.target.closest('a[href^="#"]');
            if (link) {
                e.preventDefault();
                const target = document.querySelector(link.getAttribute('href'));
                if (target) {
                    const offset = 80; // Account for fixed navbar
                    const top = target.offsetTop - offset;
                    window.scrollTo({
                        top: top,
                        behavior: 'smooth'
                    });
                }
            }
        });

        // Add scroll-triggered animations
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, {
            threshold: 0.1,
            rootMargin: '-50px 0px'
        });

        // Set initial styles for animated elements
        document.querySelectorAll('section > .container').forEach(section => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(20px)';
            section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(section);
        });

        // Add stats counter animation
        function animateCounters() {
            const counters = document.querySelectorAll('.text-4xl.font-bold:not(.animated)');
            counters.forEach(counter => {
                const target = parseInt(counter.textContent.replace(/[^\d]/g, ''));
                if (isNaN(target)) return;

                counter.classList.add('animated');
                let current = 0;
                const increment = target / 50; // Animate over 50 frames
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        counter.textContent = target.toLocaleString() + (counter.textContent.match(/\D+$/) || [''])[0];
                        clearInterval(timer);
                    } else {
                        counter.textContent = Math.floor(current).toLocaleString() + (counter.textContent.match(/\D+$/) || [''])[0];
                    }
                }, 30);
            });
        }

        // Trigger counter animation when stats section is visible
        const statsSection = document.querySelector('.py-20.bg-gray-900\\/50');
        if (statsSection) {
            const statsObserver = new IntersectionObserver((entries) => {
                if (entries[0].isIntersecting) {
                    animateCounters();
                    statsObserver.unobserve(statsSection);
                }
            });
            statsObserver.observe(statsSection);
        }

        // Add keyboard navigation support
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                // Close any open modals (if any)
                const modals = document.querySelectorAll('[class*="modal"]');
                modals.forEach(modal => {
                    modal.classList.add('hidden');
                });
            }

            if (e.key === 'Home') {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            if (e.key === 'End') {
                window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
            }
        });

    </script>
</body>
</html>
