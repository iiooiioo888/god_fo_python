<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API 文檔 | WebCrawler Commander</title>
    <link rel="icon" type="image/x-icon" href="assets/icons/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Navigation -->
    <nav class="bg-indigo-600 text-white shadow-lg">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <a href="index.html" class="flex items-center space-x-2 hover:text-indigo-200 transition">
                    <i data-feather="globe" class="w-6 h-6"></i>
                    <h1 class="text-xl font-bold">爬爬总控台</h1>
                </a>
            </div>
            <div id="nav-menu" class="hidden md:flex space-x-6">
                <a href="index.html" class="hover:text-indigo-200 transition">儀表盤</a>
                <a href="#crawler" class="hover:text-indigo-200 transition">爬蟲管理</a>
                <a href="#queue" class="hover:text-indigo-200 transition">任務隊列</a>
                <a href="#data" class="hover:text-indigo-200 transition">數據預覽</a>
                <a href="api-docs.html" class="hover:text-indigo-200 transition text-white font-semibold">API文檔</a>
                <a href="notifications.html" class="hover:text-indigo-200 transition">通知中心</a>
                <a href="settings.html" class="hover:text-indigo-200 transition">系統設定</a>
            </div>
            <div class="flex items-center space-x-4">
                <button id="mobile-menu-button" class="md:hidden focus:outline-none">
                    <i data-feather="menu" class="w-6 h-6"></i>
                </button>
                <div class="relative">
                    <img id="user-avatar" src="https://static.photos/people/200x200/10" alt="User" class="w-8 h-8 rounded-full cursor-pointer">
                    <div id="user-dropdown" class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 hidden">
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-indigo-100">個人中心</a>
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-indigo-100">系統設定</a>
                        <a href="#" class="block px-4 py-2 text-gray-800 hover:bg-indigo-100">退出登錄</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">API 文檔</h1>
            <p class="text-gray-600 text-lg">WebCrawler Commander RESTful API 完整文檔</p>
            <div class="mt-4 flex flex-wrap gap-2">
                <span class="px-3 py-1 bg-indigo-100 text-indigo-800 text-sm rounded-full">RESTful API</span>
                <span class="px-3 py-1 bg-green-100 text-green-800 text-sm rounded-full">JSON</span>
                <span class="px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full">v1.0</span>
            </div>
        </div>

        <!-- API Overview -->
        <div class="bg-white rounded-lg shadow mb-6">
            <div class="px-6 py-4 border-b border-gray-200">
                <h2 class="text-lg font-medium text-gray-900">API 概覽</h2>
            </div>
            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="font-medium text-gray-900 mb-2">基本信息</h3>
                        <dl class="space-y-2">
                            <div class="flex">
                                <dt class="w-20 text-sm font-medium text-gray-500">Base URL:</dt>
                                <dd class="text-sm text-gray-900">http://localhost:8000/api/v1</dd>
                            </div>
                            <div class="flex">
                                <dt class="w-20 text-sm font-medium text-gray-500">版本:</dt>
                                <dd class="text-sm text-gray-900">v1.0</dd>
                            </div>
                            <div class="flex">
                                <dt class="w-20 text-sm font-medium text-gray-500">格式:</dt>
                                <dd class="text-sm text-gray-900">JSON</dd>
                            </div>
                        </dl>
                    </div>
                    <div>
                        <h3 class="font-medium text-gray-900 mb-2">認證方式</h3>
                        <div class="text-sm text-gray-600 space-y-1">
                            <p><strong>Bearer Token:</strong> Authorization: Bearer {token}</p>
                            <p><strong>API Key:</strong> X-API-Key: {api_key}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- API Endpoints -->
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
            <!-- Sidebar Navigation -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-lg shadow sticky top-4">
                    <div class="px-4 py-3 border-b border-gray-200">
                        <h3 class="font-medium text-gray-900">目錄</h3>
                    </div>
                    <nav class="px-4 py-2">
                        <ul class="space-y-1">
                            <li><a href="#crawlers" class="block py-1 text-sm text-indigo-600 hover:text-indigo-800">爬蟲管理</a></li>
                            <li><a href="#tasks" class="block py-1 text-sm text-gray-600 hover:text-indigo-600">任務管理</a></li>
                            <li><a href="#data" class="block py-1 text-sm text-gray-600 hover:text-indigo-600">數據操作</a></li>
                            <li><a href="#monitoring" class="block py-1 text-sm text-gray-600 hover:text-indigo-600">系統監控</a></li>
                            <li><a href="#auth" class="block py-1 text-sm text-gray-600 hover:text-indigo-600">認證</a></li>
                        </ul>
                    </nav>
                </div>
            </div>

            <!-- Main Content -->
            <div class="lg:col-span-3 space-y-6">
                <!-- Crawler Management -->
                <section id="crawlers" class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <div class="flex items-center space-x-2">
                            <h2 class="text-lg font-medium text-gray-900">爬蟲管理</h2>
                            <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">GET</span>
                            <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full">POST</span>
                            <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full">PUT</span>
                            <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full">DELETE</span>
                        </div>
                    </div>
                    <div class="p-6 space-y-6">
                        <!-- List Crawlers -->
                        <div class="border border-gray-200 rounded-lg">
                            <div class="px-4 py-3 border-b border-gray-200 bg-gray-50">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-medium text-gray-900">獲取爬蟲列表</h3>
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">GET</span>
                                </div>
                            </div>
                            <div class="p-4">
                                <div class="text-sm text-gray-600 mb-3">
                                    <code class="bg-gray-100 px-2 py-1 rounded">GET /api/v1/crawlers</code>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <h4 class="font-medium text-gray-900 mb-2">請求參數</h4>
                                        <pre class="text-sm bg-gray-100 p-3 rounded text-gray-800"><code>{
  "status": "active",    // 可選: active, paused, stopped
  "page": 1,            // 可選: 頁碼
  "limit": 10           // 可選: 每頁數量
}</code></pre>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-gray-900 mb-2">響應示例</h4>
                                        <pre class="text-sm bg-green-50 p-3 rounded text-gray-800 border-l-4 border-green-400"><code>{
  "code": 200,
  "data": {
    "crawlers": [
      {
        "id": "123",
        "name": "电商商品爬虫",
        "status": "active",
        "last_run": "2023-12-01T10:00:00Z"
      }
    ],
    "pagination": {
      "page": 1,
      "total": 50
    }
  }
}</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Create Crawler -->
                        <div class="border border-gray-200 rounded-lg">
                            <div class="px-4 py-3 border-b border-gray-200 bg-gray-50">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-medium text-gray-900">創建新爬蟲</h3>
                                    <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded">POST</span>
                                </div>
                            </div>
                            <div class="p-4">
                                <div class="text-sm text-gray-600 mb-3">
                                    <code class="bg-gray-100 px-2 py-1 rounded">POST /api/v1/crawlers</code>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <h4 class="font-medium text-gray-900 mb-2">請求示例</h4>
                                        <pre class="text-sm bg-gray-100 p-3 rounded text-gray-800"><code>{
  "name": "商品信息采集",
  "url": "https://example.com/products",
  "schedule": "daily",
  "config": {
    "delay": 1000,
    "timeout": 30,
    "user_agent": "WebCrawler/1.0"
  }
}</code></pre>
                                    </div>
                                    <div>
                                        <h4 class="font-medium text-gray-900 mb-2">成功響應</h4>
                                        <pre class="text-sm bg-green-50 p-3 rounded text-gray-800 border-l-4 border-green-400"><code>{
  "code": 201,
  "data": {
    "id": "456",
    "name": "商品信息采集",
    "status": "created",
    "created_at": "2023-12-01T10:30:00Z"
  }
}</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Task Management -->
                <section id="tasks" class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h2 class="text-lg font-medium text-gray-900">任務管理</h2>
                    </div>
                    <div class="p-6">
                        <div class="border border-gray-200 rounded-lg">
                            <div class="px-4 py-3 border-b border-gray-200 bg-gray-50">
                                <div class="flex items-center justify-between">
                                    <h3 class="font-medium text-gray-900">獲取任務列表</h3>
                                    <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded">GET</span>
                                </div>
                            </div>
                            <div class="p-4">
                                <div class="text-sm text-gray-600 mb-3">
                                    <code class="bg-gray-100 px-2 py-1 rounded">GET /api/v1/tasks</code>
                                </div>
                                <div class="grid grid-cols-1 gap-4">
                                    <div>
                                        <h4 class="font-medium text-gray-900 mb-2">任務狀態類型</h4>
                                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                                            <span class="px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded text-center">pending</span>
                                            <span class="px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded text-center">running</span>
                                            <span class="px-2 py-1 bg-green-100 text-green-800 text-xs rounded text-center">completed</span>
                                            <span class="px-2 py-1 bg-red-100 text-red-800 text-xs rounded text-center">failed</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Error Codes -->
                <section id="errors" class="bg-white rounded-lg shadow">
                    <div class="px-6 py-4 border-b border-gray-200">
                        <h2 class="text-lg font-medium text-gray-900">錯誤代碼</h2>
                    </div>
                    <div class="p-6">
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead>
                                    <tr class="border-b border-gray-200">
                                        <th class="text-left py-2 px-3 font-medium text-gray-900">代碼</th>
                                        <th class="text-left py-2 px-3 font-medium text-gray-900">描述</th>
                                        <th class="text-left py-2 px-3 font-medium text-gray-900">原因</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    <tr>
                                        <td class="py-2 px-3"><code class="bg-red-100 text-red-800 px-1 rounded">400</code></td>
                                        <td class="py-2 px-3">請求參數錯誤</td>
                                        <td class="py-2 px-3">缺少必要參數或參數格式不正確</td>
                                    </tr>
                                    <tr>
                                        <td class="py-2 px-3"><code class="bg-red-100 text-red-800 px-1 rounded">401</code></td>
                                        <td class="py-2 px-3">未授權訪問</td>
                                        <td class="py-2 px-3">API Key 或 Token 無效</td>
                                    </tr>
                                    <tr>
                                        <td class="py-2 px-3"><code class="bg-yellow-100 text-yellow-800 px-1 rounded">403</code></td>
                                        <td class="py-2 px-3">權限不足</td>
                                        <td class="py-2 px-3">沒有操作該資源的權限</td>
                                    </tr>
                                    <tr>
                                        <td class="py-2 px-3"><code class="bg-gray-100 text-gray-800 px-1 rounded">404</code></td>
                                        <td class="py-2 px-3">資源未找到</td>
                                        <td class="py-2 px-3">請求的資源不存在</td>
                                    </tr>
                                    <tr>
                                        <td class="py-2 px-3"><code class="bg-red-100 text-red-800 px-1 rounded">500</code></td>
                                        <td class="py-2 px-3">服務器錯誤</td>
                                        <td class="py-2 px-3">服務器內部錯誤</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script>
        // 代碼高亮
        document.addEventListener('DOMContentLoaded', function() {
            // 確保 highlight.js 已載入
            if (typeof hljs !== 'undefined') {
                hljs.highlightAll();
            }

            // 平滑滾動到錨點
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });
        });
    </script>
</body>
</html>
