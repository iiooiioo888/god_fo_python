<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- Basic Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é•œå… - æŠ€æœ¯ç¤¾åŒº | é•œç•Œ</title>
    <meta name="description" content="æ•°æ®æºå¼€å‘æŠ€æœ¯è®¨è®ºç¤¾åŒºï¼Œåˆ†äº«ç»éªŒã€è§£å†³é—®é¢˜ã€åä½œå¼€å‘">
    <meta name="keywords" content="ç¤¾åŒº,è®ºå›,æŠ€æœ¯è®¨è®º,æ•°æ®æº,çˆ¬è™«,åä½œ">
    <meta name="author" content="é•œç•Œå¹³å°">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ”</text></svg>">

    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Libraries -->
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>

    <!-- Component System -->
    <script src="components/template-processor.js"></script>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-900 to-black text-white">
    <custom-navbar></custom-navbar>

    <div class="min-h-screen">
        <!-- Page Header -->
        <header class="pt-32 pb-16 bg-gradient-to-r from-purple-900 via-blue-900 to-indigo-900">
            <div class="container mx-auto px-4 text-center">
                <h1 class="text-4xl md:text-5xl font-bold mb-4 flex items-center justify-center gap-4">
                    <i data-feather="message-square" class="text-purple-400"></i>
                    é•œå… - æŠ€æœ¯ç¤¾åŒº
                </h1>
                <p class="text-xl text-gray-300 max-w-3xl mx-auto">
                    è¿æ¥å¿—åŒé“åˆçš„å¼€å‘è€…ï¼Œåˆ†äº«ç»éªŒã€è§£å†³é—®é¢˜ã€åä½œåˆ›æ–°
                </p>
                <div class="flex flex-col sm:flex-row gap-4 justify-center mt-8">
                    <a href="#categories" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium transition-all transform hover:scale-105">
                        å¼€å§‹æ¢ç´¢
                    </a>
                    <button onclick="createNewPost()" class="px-6 py-3 bg-purple-600 hover:bg-purple-700 rounded-lg font-medium transition-all transform hover:scale-105 flex items-center gap-2">
                        <i data-feather="edit"></i>å‘å¸ƒæ–°å¸–
                    </button>
                </div>
            </div>
        </header>

        <!-- Community Stats -->
        <section class="py-12 bg-gray-900/50">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                    <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 text-center border border-blue-500/30 hover:border-blue-500/50 transition-all duration-300">
                        <div class="text-3xl font-bold text-blue-400 mb-2" id="total-members">2847</div>
                        <div class="text-sm text-gray-400">ç¤¾åŒºæˆå‘˜</div>
                    </div>
                    <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 text-center border border-green-500/30 hover:border-green-500/50 transition-all duration-300">
                        <div class="text-3xl font-bold text-green-400 mb-2" id="total-posts">12543</div>
                        <div class="text-sm text-gray-400">è®¨è®ºå¸–</div>
                    </div>
                    <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 text-center border border-purple-500/30 hover:border-purple-500/50 transition-all duration-300">
                        <div class="text-3xl font-bold text-purple-400 mb-2" id="total-replies">89123</div>
                        <div class="text-sm text-gray-400">å›å¤æ€»æ•°</div>
                    </div>
                    <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 text-center border border-yellow-500/30 hover:border-yellow-500/50 transition-all duration-300">
                        <div class="text-3xl font-bold text-yellow-400 mb-2" id="online-users">156</div>
                        <div class="text-sm text-gray-400">åœ¨çº¿ç”¨æˆ·</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Community Content -->
        <section class="py-12">
            <div class="container mx-auto px-4">
                <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">

                    <!-- Sidebar -->
                    <div class="lg:col-span-1 space-y-6">
                        <!-- Quick Categories -->
                        <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700">
                            <h3 class="text-lg font-semibold mb-4 flex items-center gap-2">
                                <i data-feather="layout" class="text-blue-400"></i>
                                å¿«é€Ÿå¯¼èˆª
                            </h3>
                            <div class="space-y-2" id="categories">
                                <a href="#" onclick="switchCategory('all')" class="block px-4 py-2 rounded-lg text-gray-300 hover:bg-blue-600/20 hover:text-blue-400 transition-all category-link active">
                                    å…¨éƒ¨è®¨è®º
                                </a>
                                <a href="#" onclick="switchCategory('tech-help')" class="block px-4 py-2 rounded-lg text-gray-300 hover:bg-blue-600/20 hover:text-blue-400 transition-all category-link">
                                    æŠ€æœ¯æ±‚åŠ©
                                </a>
                                <a href="#" onclick="switchCategory('code-share')" class="block px-4 py-2 rounded-lg text-gray-300 hover:bg-blue-600/20 hover:text-blue-400 transition-all category-link">
                                    ä»£ç åˆ†äº«
                                </a>
                                <a href="#" onclick="switchCategory('experience')" class="block px-4 py-2 rounded-lg text-gray-300 hover:bg-blue-600/20 hover:text-blue-400 transition-all category-link">
                                    ç»éªŒåˆ†äº«
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Main Content -->
                    <div class="lg:col-span-3">

                        <!-- Search and Filter -->
                        <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700 mb-6">
                            <div class="flex flex-col md:flex-row gap-4 items-center justify-between">
                                <div class="flex-1 flex gap-4">
                                    <div class="relative flex-1 max-w-md">
                                        <input type="text" placeholder="æœç´¢è®¨è®º..." class="w-full px-4 py-3 pl-12 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white" id="search-input">
                                        <i data-feather="search" class="absolute left-4 top-3.5 text-gray-500"></i>
                                    </div>
                                    <select class="px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" id="sort-select">
                                        <option>æœ€æ–°å‘å¸ƒ</option>
                                        <option>çƒ­é—¨ç¨‹åº¦</option>
                                        <option>æœ€å¤šå›å¤</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Posts List -->
                        <div class="space-y-6" id="posts-list">
                            <!-- Posts will be populated by JavaScript -->
                        </div>

                        <!-- Pagination -->
                        <div class="mt-12 flex justify-center">
                            <nav class="flex items-center gap-2">
                                <a href="#" class="px-4 py-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors">ä¸Šä¸€é¡µ</a>
                                <a href="#" class="px-4 py-2 bg-blue-600 rounded-lg">1</a>
                                <a href="#" class="px-4 py-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors">2</a>
                                <a href="#" class="px-4 py-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors">...</a>
                                <a href="#" class="px-4 py-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors">10</a>
                                <a href="#" class="px-4 py-2 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors">ä¸‹ä¸€é¡µ</a>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Create New Post Modal -->
        <div id="new-post-modal" class="fixed inset-0 bg-black/50 backdrop-blur-sm z-50 hidden">
            <div class="min-h-screen flex items-center justify-center px-4 py-8">
                <div class="bg-gray-800 rounded-xl border border-gray-700 w-full max-w-lg sm:max-w-xl md:max-w-2xl">
                    <div class="flex justify-between items-center p-6 border-b border-gray-700">
                        <h3 class="text-xl font-semibold">å‘å¸ƒæ–°è®¨è®º</h3>
                        <button onclick="closeNewPostModal()" class="text-gray-400 hover:text-white">
                            <i data-feather="x" class="w-5 h-5"></i>
                        </button>
                    </div>
                    <div class="p-6">
                        <form id="new-post-form" class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">åˆ†ç±»</label>
                                <select required class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                    <option value="">é€‰æ‹©åˆ†ç±»</option>
                                    <option value="tech-help">æŠ€æœ¯æ±‚åŠ©</option>
                                    <option value="code-share">ä»£ç åˆ†äº«</option>
                                    <option value="experience">ç»éªŒåˆ†äº«</option>
                                    <option value="data-sources">æ•°æ®æºè®¨è®º</option>
                                </select>
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">æ ‡é¢˜</label>
                                <input type="text" required class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white" placeholder="è¯·è¾“å…¥è®¨è®ºæ ‡é¢˜">
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-300 mb-2">å†…å®¹</label>
                                <textarea required class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-white resize-none" rows="6" placeholder="è¯¦ç»†æè¿°ä½ çš„é—®é¢˜æˆ–åˆ†äº«ä½ çš„ç»éªŒ..."></textarea>
                            </div>

                            <div class="flex gap-4 pt-4">
                                <button type="submit" class="flex-1 bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg font-medium transition-colors">
                                    å‘å¸ƒè®¨è®º
                                </button>
                                <button type="button" onclick="closeNewPostModal()" class="flex-1 bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-lg font-medium transition-colors">
                                    å–æ¶ˆ
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <custom-footer></custom-footer>

    <script src="components/navbar.js"></script>
    <script src="components/footer.js"></script>
    <script src="script.js"></script>
    <script>
        feather.replace();

        // Simplified community data for component demo
        let posts = [
            {
                id: 1,
                title: "å¦‚ä½•ç»•è¿‡Cloudflareçš„é«˜çº§åçˆ¬è™«ä¿æŠ¤ï¼Ÿ",
                content: "æœ€è¿‘é‡åˆ°ä¸€ä¸ªç½‘ç«™ä½¿ç”¨äº†Cloudflareçš„æœ€é«˜é˜²æŠ¤ç­‰çº§ï¼Œå¸¸è§„çš„ä»£ç†IPå’ŒUser-Agentè½®æ¢éƒ½å·²ç»æ— æ•ˆäº†...",
                category: "tech-help",
                time: "2024-10-28 14:30",
                likes: 25,
                replies: 12,
                author: "çˆ¬è™«æ–°äºº"
            },
            {
                id: 2,
                title: "åˆ†äº«ä¸€ä¸ªé«˜æ•ˆçš„åˆ†å¸ƒå¼çˆ¬è™«æ¡†æ¶",
                content: "å¼€å‘äº†ä¸€ä¸ªåŸºäºRedisé˜Ÿåˆ—çš„åˆ†å¸ƒå¼çˆ¬è™«æ¡†æ¶ï¼Œæ”¯æŒåŠ¨æ€IPæ± ã€è‡ªåŠ¨é‡è¯•ã€ç›‘æ§é¢æ¿ç­‰åŠŸèƒ½...",
                category: "code-share",
                time: "2024-10-28 12:15",
                likes: 45,
                replies: 23,
                author: "æ¶æ„å¸ˆ"
            },
            {
                id: 3,
                title: "åå¹´çˆ¬è™«ç»éªŒæ€»ç»“ï¼šæœ€æœ‰æ•ˆçš„åæ£€æµ‹ç­–ç•¥",
                content: "ä»äº‹çˆ¬è™«å¼€å‘å·²ç»æœ‰åå¹´äº†ï¼Œæƒ³å’Œå¤§å®¶åˆ†äº«ä¸€äº›ç»è¿‡æ—¶é—´æ£€éªŒçš„å®ç”¨ç­–ç•¥...",
                category: "experience",
                time: "2024-10-28 10:45",
                likes: 89,
                replies: 34,
                author: "æ•°æ®ä¸“å®¶"
            }
        ];

        let currentCategory = 'all';

        // Initialize community
        function initCommunity() {
            renderPosts();
            updateCommunityStats();
        }

        // Render posts list using simplified format
        function renderPosts() {
            const postsContainer = document.getElementById('posts-list');
            let filteredPosts = posts;

            if (currentCategory !== 'all') {
                filteredPosts = posts.filter(post => post.category === currentCategory);
            }

            // Sort by likes descending
            filteredPosts.sort((a, b) => b.likes - a.likes);

            postsContainer.innerHTML = filteredPosts.length === 0 ?
                '<div class="text-center py-12 text-gray-400">è¯¥åˆ†ç±»æš‚æ— è®¨è®º</div>' :
                filteredPosts.map(post => createPostElement(post)).join('');

            feather.replace();
        }

        function createPostElement(post) {
            const categoryLabels = {
                'tech-help': 'æŠ€æœ¯æ±‚åŠ©',
                'code-share': 'ä»£ç åˆ†äº«',
                'experience': 'ç»éªŒåˆ†äº«',
                'data-sources': 'æ•°æ®æºè®¨è®º'
            };

            const categoryColors = {
                'tech-help': 'text-red-400',
                'code-share': 'text-blue-400',
                'experience': 'text-green-400',
                'data-sources': 'text-purple-400'
            };

            const timeAgo = formatTimeAgo(post.time);

            return `
                <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 border border-gray-700 hover:border-gray-600 transition-all duration-300">
                    <div class="flex items-start gap-4 mb-4">
                        <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center flex-shrink-0">
                            <span class="text-white font-medium text-sm">${post.author.charAt(0)}</span>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-2 mb-2">
                                <span class="font-medium text-white">${post.author}</span>
                                <span class="px-2 py-1 bg-gray-600 text-gray-300 text-xs rounded-full ${categoryColors[post.category]}">${categoryLabels[post.category]}</span>
                            </div>
                            <h3 class="text-lg font-semibold text-white mb-2">${post.title}</h3>
                            <p class="text-gray-300 mb-3 text-sm">${post.content.substring(0, 120)}${post.content.length > 120 ? '...' : ''}</p>

                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-4 text-sm text-gray-400">
                                    <span>${timeAgo}</span>
                                </div>
                                <div class="flex items-center gap-4">
                                    <button onclick="likePost(${post.id})" class="flex items-center gap-1 text-gray-400 hover:text-red-400 transition-colors">
                                        <i data-feather="heart" class="w-4 h-4"></i>
                                        <span>${post.likes}</span>
                                    </button>
                                    <button onclick="viewPost(${post.id})" class="flex items-center gap-1 text-gray-400 hover:text-blue-400 transition-colors">
                                        <i data-feather="message-circle" class="w-4 h-4"></i>
                                        <span>${post.replies}</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // Utility functions
        function formatTimeAgo(timeString) {
            const time = new Date(timeString);
            const now = new Date();
            const diffInMs = now - time;
            const diffInMinutes = Math.floor(diffInMs / (1000 * 60));
            const diffInHours = Math.floor(diffInMinutes / 60);
            const diffInDays = Math.floor(diffInHours / 24);

            if (diffInMinutes < 60) {
                return `${diffInMinutes}åˆ†é’Ÿå‰`;
            } else if (diffInHours < 24) {
                return `${diffInHours}å°æ—¶å‰`;
            } else {
                return `${diffInDays}å¤©å‰`;
            }
        }

        function updateCommunityStats() {
            document.getElementById('total-members').textContent = '2847';
            document.getElementById('total-posts').textContent = posts.length.toString();
            document.getElementById('total-replies').textContent = posts.reduce((sum, post) => sum + post.replies, 0).toString();
            document.getElementById('online-users').textContent = '156';
        }

        // Event handlers
        function switchCategory(category) {
            currentCategory = category;
            document.querySelectorAll('.category-link').forEach(link => {
                link.classList.remove('active', 'bg-blue-600', 'text-blue-400');
            });
            document.querySelector('[onclick="switchCategory(\'' + category + '\')"]').classList.add('active', 'bg-blue-600', 'text-blue-400');
            renderPosts();
        }

        function createNewPost() {
            document.getElementById('new-post-modal').classList.remove('hidden');
        }

        function closeNewPostModal() {
            document.getElementById('new-post-modal').classList.add('hidden');
            document.getElementById('new-post-form').reset();
        }

        function viewPost(postId) {
            const post = posts.find(p => p.id === postId);
            if (post) {
                showToast('æŸ¥çœ‹: ' + post.title, 'info');
            }
        }

        function likePost(postId) {
            const post = posts.find(p => p.id === postId);
            if (post) {
                post.likes++;
                renderPosts();
                showToast('å·²ç‚¹èµ', 'success');
            }
        }

        // Search functionality
        document.getElementById('search-input').addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const postsContainer = document.getElementById('posts-list');

            if (searchTerm === '') {
                renderPosts();
                return;
            }

            const filteredPosts = posts.filter(post =>
                post.title.toLowerCase().includes(searchTerm) ||
                post.content.toLowerCase().includes(searchTerm)
            );

            postsContainer.innerHTML = filteredPosts.length === 0 ?
                '<div class="text-center py-12 text-gray-400">æœªæ‰¾åˆ°ç›¸å…³è®¨è®º</div>' :
                filteredPosts.map(post => createPostElement(post)).join('');

            feather.replace();
        });

        // Form submission
        document.getElementById('new-post-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const formData = new FormData(e.target);
            const data = Object.fromEntries(formData);

            const newPost = {
                id: Date.now(),
                title: data.æ ‡é¢˜,
                content: data.å†…å®¹,
                category: data.åˆ†ç±»,
                time: new Date().toISOString().replace('T', ' ').substring(0, 16),
                likes: 0,
                replies: 0,
                author: 'ç¤¾åŒºæˆå‘˜'
            };

            posts.unshift(newPost);
            renderPosts();
            closeNewPostModal();
            showToast('è®¨è®ºå·²å‘å¸ƒï¼', 'success');
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', initCommunity);
    </script>
</body>
</html>
